<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="generator" content="Docutils 0.20.1: https://docutils.sourceforge.io/" />
<title>Configuración LDAP</title>
<link rel="stylesheet" href="html/lsr.css" type="text/css" />
</head>
<body>
<div class="document" id="configuracion-ldap">
<h1 class="title">Configuración LDAP</h1>

<div class="contents topic" id="contents">
<p class="topic-title">Contents</p>
<ul class="simple">
<li><a class="reference internal" href="#activacion" id="toc-entry-1">Activación</a></li>
<li><a class="reference internal" href="#configuracion" id="toc-entry-2">Configuración</a></li>
<li><a class="reference internal" href="#autenticacion" id="toc-entry-3">Autenticación</a></li>
<li><a class="reference internal" href="#autorizacion" id="toc-entry-4">Autorización</a><ul>
<li><a class="reference internal" href="#estrategia-de-grupo" id="toc-entry-5">Estrategia de grupo</a></li>
<li><a class="reference internal" href="#estrategia-de-propiedad" id="toc-entry-6">Estrategia de propiedad</a></li>
<li><a class="reference internal" href="#correspondencia-de-roles" id="toc-entry-7">Correspondencia de roles</a></li>
</ul>
</li>
</ul>
</div>
<p>Esta pantalla permite establecer una conexión LDAP para delegar autenticación
y/o autorización.</p>
<p>Está dividida en catro áreas diferentes relacionadas que se explican debajo:</p>
<div class="section" id="activacion">
<h1><a class="toc-backref" href="#toc-entry-1">Activación</a></h1>
<p>Esta área se usa para establecer las propiedades que configuran como <em>LibrePlan</em>
usa LDAP.</p>
<p>Si el campo <em>Habilita autenticación LDAP</em> está marcado, <em>LibrePlan</em> utiliza el
LDAP para autenticar cada vez que el usuario intenta entrar en la aplicación.</p>
<p>El campo <em>Usar LDAP roles</em> marcado significa que el mapping entre el roles LDAP
y roles LibrePlan está establecido, de manera que los permisos en LibrePlan
dependen de los roles que el usuario tiene en el LDAP.</p>
</div>
<div class="section" id="configuracion">
<h1><a class="toc-backref" href="#toc-entry-2">Configuración</a></h1>
<p>Esta sección tiene los parámentros para el acceso al LDAP. Los parámetros
<em>Base</em>, <em>UserDN</em> y <em>Contraseña</em> son los parámetros para conectar al LDAP y buscar
a los usuarios. El usuario configurado debe tener permiso en el LDAP. En la
última parte de esta sección hay un botón para comprobar que la conexión con el
LDAP es posible con los parámetros configurados. Es una buena idea probar la
conexión antes de continuar con la configuración.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Si su LDAP está configurado para trabajar con autenticación anónima puede
dejar vacíos los atributos <em>UserDN</em> y <em>Contraseña</em>.</p>
</div>
<div class="admonition tip">
<p class="first admonition-title">Tip</p>
<p>Sobre la configuración de <em>Active Directory (AD)</em>, el campo <em>Base</em> debe ser
la localización exacta donde reside el usuario vinculado en el AD.</p>
<p class="last">Ejemplo: <tt class="docutils literal">ou=organizational_unit,dc=example,dc=org</tt></p>
</div>
</div>
<div class="section" id="autenticacion">
<h1><a class="toc-backref" href="#toc-entry-3">Autenticación</a></h1>
<p>En esta sección se configuran la propiedad de los nodos de LDAP donde se
encuentra almacenada el login del usuario. La propiedad <em>UserId</em> debe ser
rellenado con el nombre de la propiedad donde el login está almacenado en el
LDAP.</p>
<p>El checkbox <em>Almacenar contraseñas en la base de datos</em> cuando se encuentra
marcado, indica que la contraseña se almacena también en la base de datos
LibrePlan. De esta forma, si el LDAP está offline o no existe conectividad, los
usuarios del LDAP pueden autenticarse contra la base de datos de LibrePlan. Si
no está marcado, los usuario de LDAP sólo pueden ser autenticados contro el
LDAP.</p>
</div>
<div class="section" id="autorizacion">
<h1><a class="toc-backref" href="#toc-entry-4">Autorización</a></h1>
<p>Esta sección permite definir la estrategia para asociar los roles de LDAP con
los roles de LibrePlan.</p>
<div class="section" id="estrategia-de-grupo">
<h2><a class="toc-backref" href="#toc-entry-5">Estrategia de grupo</a></h2>
<p>Cuando se usa esta estrategia, implica que el LDAP está usando una estrageia de
grupo de rol. Significa que los usuarios en el LDAP son nodos que cuelgan
directamente de una rama que representa el grupo.</p>
<p>El siguiente ejemplo representa una estructura de LDAP válida para usar la
estrategia de grupo.</p>
<ul>
<li><p class="first">Estructura del LDAP:</p>
<pre class="literal-block">
dc=example,dc=org
|- ou=groups
   |- cn=admins
   |- cn=itpeople
   |- cn=workers
|- ou=people
   |- uid=admin1
   |- uid=it1
   |- uid=it2
   |- uid=worker1
   |- uid=worker2
   |- uid=worker3
</pre>
</li>
</ul>
<p>En este caso, cada grupo tendrá un atributo, por ejemplo llamado <tt class="docutils literal">member</tt>,
con la lista de usuarios que pertenencen al grupo:</p>
<ul class="simple">
<li><tt class="docutils literal">cn=admins</tt>:<ul>
<li><tt class="docutils literal">member: uid=admin1,ou=people,dc=example,dc=org</tt></li>
<li><tt class="docutils literal">member: uid=it1,ou=people,dc=example,dc=org</tt></li>
</ul>
</li>
<li><tt class="docutils literal">cn=itpeople</tt>:<ul>
<li><tt class="docutils literal">member: uid=it1,ou=people,dc=example,dc=org</tt></li>
<li><tt class="docutils literal">member: uid=it2,ou=people,dc=example,dc=org</tt></li>
</ul>
</li>
<li><tt class="docutils literal">cn=workers</tt>:<ul>
<li><tt class="docutils literal">member: uid=worker1,ou=people,dc=example,dc=org</tt></li>
<li><tt class="docutils literal">member: uid=worker2,ou=people,dc=example,dc=org</tt></li>
<li><tt class="docutils literal">member: uid=worker3,ou=people,dc=example,dc=org</tt></li>
</ul>
</li>
</ul>
<p>La configuración para este caso es la siguiente:</p>
<ul class="simple">
<li>Estrategia para la búsqueda de roles: <tt class="docutils literal">Estrategia de grupo</tt></li>
<li>Path del grupo: <tt class="docutils literal">ou=groups</tt></li>
<li>Propiedad del rol: <tt class="docutils literal">member</tt></li>
<li>Consulta para la búsqueda de roles: <tt class="docutils literal"><span class="pre">uid=[USER_ID],ou=people,dc=example,dc=org</span></tt></li>
</ul>
<p>Y por ejemplo si quiere hacer alguna correspondencia de roles:</p>
<ul class="simple">
<li>Administration: <tt class="docutils literal">cn=admins;cn=itpeople</tt></li>
<li>Web service reader: <tt class="docutils literal">cn=itpeople</tt></li>
<li>Web service writer: <tt class="docutils literal">cn=itpeople</tt></li>
<li>All projects read allowed: <tt class="docutils literal">cn=admins</tt></li>
<li>All projects edition allowed: <tt class="docutils literal">cn=admins</tt></li>
<li>Project creation allowed: <tt class="docutils literal">cn=workers</tt></li>
</ul>
</div>
<div class="section" id="estrategia-de-propiedad">
<h2><a class="toc-backref" href="#toc-entry-6">Estrategia de propiedad</a></h2>
<p>Cuando el administrador decide usar esta estrategia, implica que cada usuario es
un nodo de LDAP y que en el nodo existe una propiedad que representa el grupo o
grupos al que pertenece el usuairo. En este caso, la configuración no necesita
el parámetro <em>Path del grupo</em>:</p>
<p>El siguiente ejemplo representa una estructura de LDAP válida para usar la
estrategia de propiedad.</p>
<ul>
<li><p class="first">Estructura del LDAP:</p>
<pre class="literal-block">
dc=example,dc=org
|- ou=people
   |- uid=admin1
   |- uid=it1
   |- uid=it2
   |- uid=worker1
   |- uid=worker2
   |- uid=worker3
</pre>
</li>
</ul>
<p><strong>Con atributo</strong></p>
<p>En este caso, cada usuario tendrá un atributo, por ejemplo llamado <tt class="docutils literal">group`</tt>
con el nombre del grupo al que pertenece:</p>
<ul class="simple">
<li><tt class="docutils literal">uid=admin1</tt>:<ul>
<li><tt class="docutils literal">group: admins</tt></li>
</ul>
</li>
<li><tt class="docutils literal">uid=it1</tt>:<ul>
<li><tt class="docutils literal">group: itpeople</tt></li>
</ul>
</li>
<li><tt class="docutils literal">uid=it2</tt>:<ul>
<li><tt class="docutils literal">group: itpeople</tt></li>
</ul>
</li>
<li><tt class="docutils literal">uid=worker1</tt>:<ul>
<li><tt class="docutils literal">group: workers</tt></li>
</ul>
</li>
<li><tt class="docutils literal">uid=worker2</tt>:<ul>
<li><tt class="docutils literal">group: workers</tt></li>
</ul>
</li>
<li><tt class="docutils literal">uid=worker3</tt>:<ul>
<li><tt class="docutils literal">group: workers</tt></li>
</ul>
</li>
</ul>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">Esta estrategia tienen una restricción, cada usuario puede pertenecer sólo a un
grupo.</p>
</div>
<p>La configuración para este caso es la siguiente:</p>
<ul class="simple">
<li>Estrategia para la búsqueda de roles: <tt class="docutils literal">Estrategia de propiedad</tt></li>
<li>Path del grupo:</li>
<li>Propiedad del rol: <tt class="docutils literal">group</tt></li>
<li>Consulta para la búsqueda de roles: <tt class="docutils literal">[USER_ID]</tt></li>
</ul>
<p>Y por ejemplo si quiere hacer alguna correspondencia de roles:</p>
<ul class="simple">
<li>Administration: <tt class="docutils literal">admins;itpeople</tt></li>
<li>Web service reader: <tt class="docutils literal">itpeople</tt></li>
<li>Web service writer: <tt class="docutils literal">itpeople</tt></li>
<li>All projects read allowed: <tt class="docutils literal">admins</tt></li>
<li>All projects edition allowed: <tt class="docutils literal">admins</tt></li>
<li>Project creation allowed: <tt class="docutils literal">workers</tt></li>
</ul>
<p><strong>Por identificador de usuario</strong></p>
<p>Incluso puede tener una solución para especificar los roles de LibrePlan
directamente a los usuarios, sin tener un atributo en cada usuario de LDAP.</p>
<p>En este caso, especificará que usuarios tienen los diferentes roles por <tt class="docutils literal">uid</tt>.</p>
<p>La configuración para este caso es la siguiente:</p>
<ul class="simple">
<li>Estrategia para la búsqueda de roles: <tt class="docutils literal">Estrategia de propiedad</tt></li>
<li>Path del grupo:</li>
<li>Propiedad del rol: <tt class="docutils literal">uid</tt></li>
<li>Consulta para la búsqueda de roles: <tt class="docutils literal">[USER_ID]</tt></li>
</ul>
<p>Y por ejemplo si quiere hacer alguna correspondencia de roles:</p>
<ul class="simple">
<li>Administration: <tt class="docutils literal">admin1;it1</tt></li>
<li>Web service reader: <tt class="docutils literal">it1;it2</tt></li>
<li>Web service writer: <tt class="docutils literal">it1;it2</tt></li>
<li>All projects read allowed: <tt class="docutils literal">admin1</tt></li>
<li>All projects edition allowed: <tt class="docutils literal">admin1</tt></li>
<li>Project creation allowed: <tt class="docutils literal">worker1;worker2;worker3</tt></li>
</ul>
</div>
<div class="section" id="correspondencia-de-roles">
<h2><a class="toc-backref" href="#toc-entry-7">Correspondencia de roles</a></h2>
<p>En el fondo de la pantalla de esta sección hay una tabla con todos los roles de
LibrePlan y un campo de texto anexo a cada uno de ellos. Esta área es para la
asociación de los roles. Por ejemplo, si un usuario administrador de LibrePlan
decide que rol de LibrePlan <em>Administración</em> se corresponde con los roles
<em>admin</em> y <em>administrators</em> del LDAP en el campo de texto hay que configurar:
&quot;<tt class="docutils literal">admin;administrators</tt>&quot;. El carácter de separación de roles es &quot;<tt class="docutils literal">;</tt>&quot;.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p>Si quiere especificar que todos los usuarios o todos los roles tengan un
permiso puede usar un asterisco (<tt class="docutils literal">*</tt>) como comodín para referirse a ellos.
Por ejemplo, si quiere que todo el mundo tenga el rol <em>Project creation
allowed</em> configurará la correspondica de roles como sigue:</p>
<ul class="last simple">
<li>Project creation allowed: <tt class="docutils literal">*</tt></li>
</ul>
</div>
</div>
</div>
</div>
</body>
</html>
